CREATE DATABASE QUAN_LY_PHONG_HAT


CREATE TABLE KHACH_HANG (
	MaKH INT PRIMARY KEY,
	TenKH VARCHAR(30),
	DiaChi VARCHAR(30),
	SoDT CHAR(11)
)

CREATE TABLE PHONG (
	MaPhong INT PRIMARY KEY, 
	LoaiPhong VARCHAR(20),
	SoKhachToiDa INT,
	GiaPhong DECIMAL(6,3),
	MoTa VARCHAR(255)
)

CREATE TABLE DAT_PHONG (
	MaDP INT PRIMARY KEY,
	MaPhong INT,
	MaKH INT,
	NgayDat DATE,
	GioBatDau TIME,
	GioKetThuc TIME,
	TienDatCoc DECIMAL(6,3),
	GhiChu VARCHAR(255),
	TrangThaiDat VARCHAR(30),
	FOREIGN KEY (MaPhong) REFERENCES dbo.PHONG(MaPhong),
	FOREIGN KEY (MaKH) REFERENCES dbo.KHACH_HANG(MaKH)
)

CREATE TABLE DICH_VU_DI_KEM (
	MaDV INT PRIMARY KEY,
	TenDV VARCHAR(255),
	DonViTinh VARCHAR(30),
	DonGia DECIMAL(6,3)
)

CREATE TABLE CHI_TIET_SD_DV (
	MaDP INT,
	MaDV INT, 
	SoLuong INT,
	PRIMARY KEY (MaDP, MADV),
    FOREIGN KEY (MaDP) REFERENCES dbo.DAT_PHONG(MaDP)
)
ALTER TABLE dbo.CHI_TIET_SD_DV
ADD FOREIGN KEY (MaDV) REFERENCES dbo.DICH_VU_DI_KEM(MaDV)
-- Insert Data
INSERT INTO dbo.PHONG(MaPhong,LoaiPhong,SoKhachToiDa,GiaPhong,MoTa) VALUES
(1, 'LOAI 1', 20, '60.000', ''),
(2, 'LOAI 1', 25, '80.000', ''),
(3, 'LOAI 2', 15, '50.000', ''),
(4, 'LOAI 3', 20, '50.000', '');

INSERT INTO dbo.KHACH_HANG(MaKH,TenKH,DiaChi,SoDT) VALUES
(1, 'MARIA OZAWA', 'HOA XUAN', '11111111111'),
(2, 'TOKUDA', 'HOA XUAN', '11111111112'),
(3, 'MIKAMI YUA', 'HOA XUAN', '11111111113'),
(4, 'NGUYEN VAN D', 'HOA XUAN', '11111111114');

INSERT INTO dbo.DICH_VU_DI_KEM(MaDV,TenDV,DonViTinh,DonGia) VALUES
(1, 'HOT GIRL', 'EM', '10.000'),
(2, 'HOA HAU', 'EM', '20.000'),
(3, 'BEER', 'LON', '10.000'),
(4, 'TRAI CAY', 'DIA', '35.000');

INSERT INTO dbo.DAT_PHONG(MaDP,MaPhong,MaKH,NgayDat,GioBatDau,GioKetThuc,TienDatCoc,GhiChu,TrangThaiDat) VALUES
(1, 1, 2, '2018-03-26', '11:00:00', '13:00:00', '100.000', '', 'DA DAT'),
(2, 1, 3, '2018-03-27', '17:15:00', '19:15:00', '50.000', '', 'DA HUY'),
(3, 2, 2, '2018-03-26', '20:30:00', '22:15:00', '100.000', '', 'DA DAT'),
(4, 3, 1, '2018-04-01', '19:30:00', '21:15:00', '200.000', '', 'DA DAT');

INSERT INTO dbo.CHI_TIET_SD_DV(MaDP,MaDV,SoLuong) VALUES
(1, 1, 20),
(1, 2, 10),
(1, 3, 3),
(2, 2, 10),
(2, 3, 1),
(3, 3, 2),
(3, 4, 10);
